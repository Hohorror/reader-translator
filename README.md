# PDF Reader & Translator

Интерактивное веб-приложение для чтения и изучения книг в формате PDF с расширенными возможностями перевода, озвучивания и ведения личного словаря для изучающих иностранные языки.

## Обзор проекта

Приложение представляет собой полноценную платформу для изучения иностранных языков через чтение литературы. Оно позволяет загружать, читать и хранить PDF-документы, осуществлять перевод отдельных слов и целых страниц с сохранением контекста, озвучивать текст, а также создавать и управлять персональным словарем изучаемых слов.

## Основной функционал

### Система аутентификации и авторизации
- Регистрация новых пользователей
- Вход в систему с использованием JWT-токенов
- Защищенный доступ к персональным ресурсам

### Управление PDF-библиотекой
- Загрузка PDF-файлов в личную библиотеку
- Просмотр списка загруженных файлов с метаданными (имя, размер, дата загрузки)
- Удаление файлов из библиотеки
- Скачивание файлов

### PDF-просмотрщик
- Многостраничная навигация по документу
- Масштабирование (увеличение/уменьшение)
- Полноэкранный режим
- Отображение номера текущей страницы и общего количества страниц

### Система перевода
- Перевод отдельных слов при клике на текст
- Полный перевод страницы с отображением в отдельной панели
- Контекстный перевод с учетом окружающего текста
- Поддержка предварительно подготовленных книг с более точным переводом
- Алгоритм сопоставления параграфов для улучшения качества перевода

### Озвучивание текста
- Озвучивание выделенных слов на языке оригинала (английский)
- Озвучивание перевода на русском языке
- Визуальная индикация процесса озвучивания

### Персональный словарь
- Добавление слов и их переводов в личный словарь
- Управление словарем через панель личного кабинета
- Удаление слов из словаря
- Автоматическое выделение ранее добавленных слов в тексте

### Подготовка книг
- Функционал для создания сопоставлений между оригинальным текстом и переводом
- Улучшение качества перевода для предварительно обработанных книг
- Сохранение сопоставлений для последующего использования

## Технологии и архитектура

### Backend
- **FastAPI** - современный высокопроизводительный Python веб-фреймворк
- **SQLite/SQLAlchemy** - база данных и ORM для хранения пользовательских данных
- **JWT** - аутентификация и авторизация через токены
- **Pydantic** - валидация данных и сериализация
- **Alembic** - миграции базы данных
- **Python-jose/Passlib** - криптографические библиотеки для безопасности

### Frontend
- **HTML5/CSS3/JavaScript** - основа пользовательского интерфейса
- **PDF.js** - библиотека для отображения PDF-документов в браузере
- **Web Speech API** - технология озвучивания текста
- **Fetch API** - асинхронные запросы к серверу
- **LocalStorage** - хранение JWT-токенов

### Инфраструктура
- **Docker** - контейнеризация приложения
- **Docker Compose** - оркестрация контейнеров для разработки и деплоя
- **NGINX** (опционально) - веб-сервер для продакшена
- **Uvicorn** - ASGI-сервер для FastAPI

## Структура проекта

```
app/ - основное приложение
├── api/ - API-маршруты
├── core/ - базовая конфигурация и утилиты
├── db/ - настройки базы данных
├── models/ - модели данных
├── repositories/ - репозитории для доступа к данным
├── routers/ - маршруты приложения
├── schemas/ - валидация входящих/исходящих данных
├── services/ - бизнес-логика
├── static/ - статические файлы
│   ├── book-mapping.js - логика сопоставления текстов
│   ├── script.js - основной JS для личного кабинета
│   ├── style.css - основные стили
│   ├── viewer.css - стили для просмотрщика PDF
│   └── viewer.js - логика работы просмотрщика
├── templates/ - шаблоны HTML-страниц
│   ├── index.html - страница входа/регистрации
│   ├── prepare.html - страница подготовки книг
│   ├── profile.html - страница личного кабинета
│   └── viewer.html - страница просмотра PDF
├── __init__.py - инициализация приложения
├── auth.py - логика аутентификации
├── database.py - настройки подключения к БД
├── main.py - основной файл приложения
└── models.py - основные модели данных

alembic/ - миграции базы данных
uploads/ - директория для загруженных файлов
tests/ - тесты
```

## База данных

### Основные таблицы
- **users** - информация о пользователях
- **user_files** - загруженные пользователями PDF-файлы
- **user_dictionary** - словарь пользователя с сохраненными словами
- **book_mappings** - сопоставления для предварительно подготовленных книг

## API-эндпоинты

### Аутентификация
- **POST /api/token** - получение JWT-токена
- **POST /api/register** - регистрация нового пользователя
- **GET /api/users/me** - получение информации о текущем пользователе

### Файлы
- **GET /api/files** - получение списка файлов пользователя
- **POST /api/files/upload** - загрузка нового файла
- **DELETE /api/files/{file_id}** - удаление файла

### Перевод
- **POST /api/translate** - перевод текста
- **GET /api/book-mapping/{filename}** - получение сопоставления для книги
- **POST /api/book-mapping** - сохранение сопоставления для книги

### Словарь
- **GET /api/dictionary** - получение словаря пользователя
- **POST /api/dictionary** - добавление слова в словарь
- **DELETE /api/dictionary/{word_id}** - удаление слова из словаря
- **GET /api/dictionary/check** - проверка наличия слова в словаре

## Страницы приложения

### Главная страница (/)
- Форма входа и регистрации
- Переключение между формами
- Обработка ошибок аутентификации

### Личный кабинет (/profile)
- Информация о пользователе
- Три вкладки: Профиль, Библиотека, Словарь
- Управление файлами и словарем

### Просмотр PDF (/view)
- Просмотр PDF с навигацией
- Панели перевода слов и страниц
- Кнопки озвучивания и добавления в словарь

### Подготовка книг (/prepare)
- Загрузка оригинала и перевода
- Интерфейс для сопоставления текстов
- Сохранение сопоставлений

## Установка и запуск

### Локальная установка

1. Клонировать репозиторий
```bash
git clone https://github.com/yourname/pdf-reader-translator.git
cd pdf-reader-translator
```

2. Создать виртуальное окружение и активировать его
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
venv\Scripts\activate     # для Windows
```

3. Установить зависимости
```bash
pip install -r requirements.txt
```

4. Применить миграции базы данных
```bash
alembic upgrade head
```

5. Запустить приложение
```bash
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

6. Открыть в браузере: http://localhost:8000

### Запуск с Docker

1. Клонировать репозиторий
```bash
git clone https://github.com/yourname/pdf-reader-translator.git
cd pdf-reader-translator
```

2. Запустить с Docker Compose
```bash
docker-compose up -d
```

3. Открыть в браузере: http://localhost:8000

## Использование приложения

### Вход и регистрация
1. Перейдите на главную страницу
2. Введите имя пользователя и пароль или зарегистрируйтесь
3. После успешного входа вы будете перенаправлены в личный кабинет

### Работа с PDF-файлами
1. Во вкладке "Библиотека" загрузите PDF-файл
2. Нажмите "Просмотреть" для открытия файла в просмотрщике
3. Используйте панель инструментов для навигации и масштабирования

### Перевод и словарь
1. Кликните на слово в тексте для просмотра перевода
2. Используйте кнопки для озвучивания или добавления в словарь
3. Просмотрите полный перевод страницы в верхней панели
4. Откройте вкладку "Словарь" в личном кабинете для управления сохраненными словами

### Подготовка книг (для продвинутых пользователей)
1. Перейдите на страницу "Подготовка книг"
2. Загрузите оригинальный текст и перевод
3. Используйте интерфейс для сопоставления параграфов
4. Сохраните сопоставление для использования при чтении

## Развитие проекта

Проект находится в активной разработке. Планируемые улучшения:
- Поддержка дополнительных языков
- Статистика изучения слов
- Тесты для проверки запоминания слов
- Мобильная версия приложения
- Расширенная настройка интерфейса

## Лицензия

Проект распространяется под лицензией MIT. 